<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Webserv by Jules and Lan</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: {{session_set_background_color}};
            margin: 50px;
            text-align: center;
        }
        h1 { color: #333; }
        .form-container {
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ddd;
            width: 400px;
            background-color: #fff;
            border-radius: 8px;
        }
        input[type=text], input[type=password], input[type=file] {
            width: 90%;
            padding: 8px;
            margin: 5px 0;
        }
        input[type=submit], button {
            padding: 8px 16px;
            margin-top: 10px;
        }
        a { display: block; margin-top: 15px; }
        textarea { width: 95%; height: 100px; margin-top: 10px; }
    </style>
    <link rel="icon" href="/images/alien.png" type="image/png">
    <link rel="apple-touch-icon" href="/images/alien.png">
    <link rel="apple-touch-icon-precomposed" href="/images/alien.png">
</head>
<body>
    <h1>Welcome to Webserv</h1>

    <!-- About Section -->
    <section class="section">
        <h2 class="section-title">You can  go to the Test page</h2>
        <!-- Test Mode Button -->
        <button onclick="window.location.href='/index/test.html'" 
                style="
                    margin-top: 20px; 
                    padding: 12px 24px; 
                    font-size: 1rem; 
                    color: white; 
                    background-color: #556b6b; 
                    border: none; 
                    border-radius: 6px; 
                    cursor: pointer;
                    transition: background-color 0.3s;
                "
                onmouseover="this.style.backgroundColor='#445555'" 
                onmouseout="this.style.backgroundColor='#556b6b'">
            Go to Test Mode
        </button>
    </section>

    <!-- Cookie Test -->
    <div id="colorPickerContainer" style="
        position: fixed;
        top: 10px;
        right: 10px;
        background: rgba(255,255,255,0.9);
        padding: 8px 12px;
        border-radius: 6px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        z-index: 1000;
    ">
        <label for="colorSelect">Background: </label>
        <select id="colorSelect">
		<option value="#FFFFFF" selected>White</option>
            <option value="#FF6B6B">Red</option>
            <option value="#FFA94D">Orange</option>
            <option value="#FFD93D">Yellow</option>
            <option value="#6BCB77">Green</option>
            <option value="#4D96FF">Blue</option>
            <option value="#845EC2">Purple</option>
            <option value="#F9F871">Light Yellow</option>
        </select>
	<div style="font-size: 12px; color: #555; margin-top: 6px;">
        Visits: {{session_set_counter}}
    </div>
    </div>
<script>
const select = document.getElementById("colorSelect");

window.onload = function() {
    const currentColor = document.body.style.backgroundColor;
    if (currentColor) {
        select.value = currentColor;
    }
};

select.addEventListener("change", function() {
    const color = this.value;
    document.body.style.backgroundColor = color;

    fetch("/session_set_background_color", {
        method: "POST",
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        body: "color=" + encodeURIComponent(color),
        credentials: "include"
    });
});
</script>

</body>
</html>
